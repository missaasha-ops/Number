<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>FUSIGURO - AI Prediction</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
  <style>
   body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0f0f0f, #1e1e1e);
      color: #f0f0f0;
      padding-bottom: 90px;
    }
    .header {
      text-align: center;
      padding: 28px 0;
      background: #111;
      font-size: 34px;
      font-weight: bold;
      color: #00ffcc;
      animation: glow 1.5s infinite alternate;
    }
    @keyframes glow {
      from { text-shadow: 0 0 10px #00ffcc; }
      to { text-shadow: 0 0 20px #00ffcc, 0 0 30px #00ffcc; }
    }
    .container {
      max-width: 900px;
      margin: auto;
      padding: 20px;
    }
    .prediction-box {
      text-align: center;
      margin-bottom: 30px;
    }
    .prediction-box h2 {
      font-size: 22px;
      color: #00ffcc;
      margin-bottom: 8px;
    }
    .prediction-box p {
      font-size: 48px;
      font-weight: 800;
      letter-spacing: 6px;
      margin: 0;
      color: gold;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: #222;
      margin-top: 18px;
    }
    th, td {
      border: 1px solid #444;
      padding: 10px;
      text-align: center;
    }
    th { background-color: #333; color: #00ffcc; }
    .jackpot {
      color: #ffd700;
      font-weight: bold;
      animation: flash 1s infinite alternate;
      text-shadow: 0 0 10px #ffcc00, 0 0 20px #ffaa00;
    }
    .loss {
      color: #ff4444;
      font-weight: bold;
    }
    @keyframes flash {
      from { opacity: 1; }
      to { opacity: 0.6; }
    }

    /* FAB */
    .fab {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      background-color: #0088cc;
      border-radius: 50%;
      color: white;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.4);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 28px;
      text-decoration: none;
      transition: transform 0.3s ease;
      z-index: 1000;
    }
    .fab:hover { transform: scale(1.08); }

    /* Responsive */
    @media (max-width: 480px) {
      .prediction-box p { font-size: 32px; letter-spacing: 3px; }
      .header { font-size: 26px; }
    }
  </style>
 </head>
 <body>
  <div class="header">FUSIGURO</div>
  <div class="container">
   <div class="prediction-box">
    <h2>AI Prediction</h2>
    <p id="prediction">Next Prediction: - - -</p>
   </div>

   <h3>Recent Results</h3>
   <table>
    <thead>
     <tr><th>Period</th><th>Number</th><th>Result</th></tr>
    </thead>
    <tbody id="resultsBody"></tbody>
   </table>

   <h3 style="margin-top:24px;">Prediction History</h3>
   <table>
    <thead>
     <tr><th>Period</th><th>Predicted (3 nums)</th><th>Actual</th><th>Status</th></tr>
    </thead>
    <tbody id="historyBody"></tbody>
   </table>
  </div>

  <a class="fab" href="https://t.me/+80gY--B_r545ZDY9" target="_blank">
    <i class="fab fa-telegram-plane"></i>
  </a>

  <script>
   const API_URL = "https://draw.ar-lottery01.com/WinGo/WinGo_30S/GetHistoryIssuePage.json";
   let lastPeriod = null;
   let lastPrediction = null;
   const predictionHistory = [];

   async function fetchResults() {
     try {
       const response = await fetch(API_URL);
       const data = await response.json();
       const results = data?.data?.list?.slice(0, 60);
       if (!results || results.length === 0) return;

       const currentPeriod = results[0].issueNumber;
       renderResults(results);

       if (lastPeriod !== currentPeriod) {
         if (lastPrediction) {
           const actualNum = parseInt(results[0].number);
           const isJackpot = lastPrediction.topThree.includes(actualNum.toString());
           const status = isJackpot ? 'ðŸ’¥ JACKPOT ðŸ’¥' : 'âŒ LOSS âŒ';

           predictionHistory.unshift({
             period: currentPeriod,
             predicted: lastPrediction.topThree.join(', '),
             actual: actualNum,
             status: status,
             isJackpot
           });
           updateHistory();
         }

         lastPeriod = currentPeriod;
         lastPrediction = threeNumberPrediction(results);
       }
     } catch (e) {
       console.error("API Error:", e);
       document.getElementById('prediction').textContent = 'Error fetching data';
     }
   }

   function renderResults(results) {
     const tbody = document.getElementById('resultsBody');
     tbody.innerHTML = '';
     results.forEach(item => {
       const num = parseInt(item.number);
       const result = num >= 5 ? 'BIG' : 'SMALL';
       const row = `<tr><td>${item.issueNumber}</td><td>${num}</td><td>${result}</td></tr>`;
       tbody.innerHTML += row;
     });
   }

   function updateHistory() {
     const tbody = document.getElementById('historyBody');
     tbody.innerHTML = '';
     predictionHistory.slice(0, 30).forEach(entry => {
       const row = `<tr>
         <td>${entry.period}</td>
         <td>${entry.predicted}</td>
         <td>${entry.actual}</td>
         <td class="${entry.isJackpot ? 'jackpot' : 'loss'}">${entry.status}</td>
       </tr>`;
       tbody.innerHTML += row;
     });
   }

   function threeNumberPrediction(results) {
     const numbers = results.map(r => parseInt(r.number));
     const freq = {};
     numbers.forEach(n => freq[n] = (freq[n] || 0) + 1);
     const entries = Object.entries(freq).map(([num, count]) => {
       const recentIndex = numbers.indexOf(parseInt(num));
       return { num: num, count: count, recentIndex: recentIndex };
     });
     entries.sort((a, b) => {
       if (b.count !== a.count) return b.count - a.count;
       return a.recentIndex - b.recentIndex;
     });
     let topThree = entries.slice(0, 3).map(e => e.num);
     if (topThree.length < 3) {
       const distinctRecent = [];
       for (let i = 0; i < numbers.length && distinctRecent.length < 3; i++) {
         const n = numbers[i].toString();
         if (!distinctRecent.includes(n)) distinctRecent.push(n);
       }
       topThree = distinctRecent.slice(0, 3);
     }
     document.getElementById('prediction').textContent = `Next Prediction: ${topThree.join(' , ')}`;
     return { topThree };
   }

   fetchResults();
   setInterval(fetchResults, 5000);
  </script>
 </body>
</html>
