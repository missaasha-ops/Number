<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Enhanced Jalwa Wingo AI Prediction</title>
<style>
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: #121212;
  color: #eee;
  text-align: center;
  padding: 30px;
  max-width: 700px;
  margin: auto;
}
h1 { color: #00bfa5; margin-bottom: 20px; }
#period1m, #textview5, #prediction { font-size: 22px; margin: 12px 0; }
#prediction span {
  font-weight: 900;
  padding: 12px 40px;
  border-radius: 25px;
  font-size: 36px;
  display: inline-block;
  min-width: 150px;
  transition: background-color 0.4s ease, color 0.4s ease;
  user-select: none;
}
.big { background-color: #00bfa5; color: #121212; box-shadow: 0 0 15px #00bfa5aa; animation: pulseBig 2s infinite; }
.small { background-color: #ff5252; color: #121212; box-shadow: 0 0 15px #ff5252aa; animation: pulseSmall 2s infinite; }
@keyframes pulseBig { 0%,100%{ box-shadow:0 0 15px #00bfa5aa; } 50%{ box-shadow:0 0 25px #00bfa5cc; } }
@keyframes pulseSmall { 0%,100%{ box-shadow:0 0 15px #ff5252aa; } 50%{ box-shadow:0 0 25px #ff5252cc; } }
table { width: 100%; margin-top: 30px; border-collapse: collapse; }
th, td { border: 1px solid #444; padding: 10px; font-size: 14px; }
th { background-color: #1f1f1f; }
</style>
</head>
<body>
<h1>Enhanced Jalwa Wingo AI Prediction</h1>
<div id="period1m">Period: --</div>
<div id="textview5">Time: -- seconds</div>
<div id="prediction">Prediction: <span id="predText">Calculating...</span></div>

<table>
<thead>
<tr><th>#</th><th>Period</th><th>Two Numbers</th><th>Prediction</th></tr>
</thead>
<tbody id="historyTable"></tbody>
</table>

<script>
const history = [];
let lastPeriod = null;
let lastOutcomeWasLoss = false;
let winStreakCounter = 0;

function generatePeriod() {
  const now = new Date();
  const totalMinutes = now.getUTCHours()*60 + now.getUTCMinutes();
  return now.getUTCFullYear()*100000 + 10001 + totalMinutes;
}

function sumDigits(num) { return num.toString().split('').reduce((a,b)=>a+parseInt(b),0); }
function newCalculationLogic(period) {
  const digitsSum = sumDigits(period);
  const reversedSum = sumDigits(parseInt(period.toString().split('').reverse().join('')));
  return (digitsSum + reversedSum) % 10;
}

// AI prediction with 1-loss â†’ 2-win rule
function newPredictionMethodWithWinLogic(value) {
  let prediction;

  if (lastOutcomeWasLoss && winStreakCounter < 2) {
    const lastPrediction = history[0] ? history[0].prediction : 'BIG';
    prediction = lastPrediction === 'BIG' ? 'SMALL' : 'BIG';
    winStreakCounter++;
  } else {
    prediction = value % 2 === 0 ? 'BIG' : 'SMALL';
    winStreakCounter = 0;
  }

  // Simulate outcome for demo
  const outcome = Math.random() > 0.5 ? 'win' : 'loss';
  lastOutcomeWasLoss = (outcome === 'loss');

  return prediction;
}

function generateTwoNumbers(prediction) {
  const pool = prediction==="SMALL"?[0,1,2,3,4]:[5,6,7,8,9];
  const shuffled = pool.sort(()=>0.5-Math.random());
  return shuffled.slice(0,2).join(', ');
}

function updateDisplay(period,prediction) {
  document.getElementById('period1m').textContent = `Period: ${period}`;
  const predText = document.getElementById('predText');
  predText.textContent = prediction;
  predText.className = prediction.toLowerCase();
}

function updateHistory(period,prediction){
  const numbers = generateTwoNumbers(prediction);
  history.unshift({ period,prediction,numbers });
  if(history.length>10) history.pop();

  const table = document.getElementById('historyTable');
  table.innerHTML = '';
  history.forEach((entry,index)=>{
    table.innerHTML+=`<tr>
      <td>${index+1}</td>
      <td>${entry.period}</td>
      <td>${entry.numbers}</td>
      <td style="color:${entry.prediction==='BIG'?'#00bfa5':'#ff5252'}">${entry.prediction}</td>
    </tr>`;
  });
}

function mainLoop(){
  const now = new Date();
  const seconds = now.getUTCSeconds();
  const remain = 60 - seconds;
  document.getElementById('textview5').textContent=`Time: ${remain} seconds`;

  const currentPeriod = generatePeriod();
  if(currentPeriod !== lastPeriod){
    lastPeriod=currentPeriod;
    const value = newCalculationLogic(currentPeriod);
    const prediction = newPredictionMethodWithWinLogic(value);
    updateDisplay(currentPeriod,prediction);
    updateHistory(currentPeriod,prediction);
  }
}

setInterval(mainLoop,1000);
window.onload=mainLoop;
</script>
</body>
</html>
